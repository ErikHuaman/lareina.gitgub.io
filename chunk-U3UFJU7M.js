import{a as q,b as H,c as f}from"./chunk-UAFGHC4C.js";import{b as R,c as V,d as z,e as G,f as D,h as L,i as j,j as O,k as $,l as B,m as U,s as J,t as K,w as Q,z as W}from"./chunk-24HPCN5L.js";import{r as X}from"./chunk-O33IRWRP.js";import"./chunk-FUIGKI6E.js";import{h as k,i as N}from"./chunk-NNFVYG4L.js";import{a as P}from"./chunk-JR3QTHJT.js";import{$a as x,Fc as M,G as p,Na as b,Pa as s,Q as u,V as F,Va as r,Wa as t,Xa as h,ab as c,bb as C,ca as y,da as E,e as S,fc as A,jb as m,jc as I,kb as v,rb as T,sb as w,wa as a}from"./chunk-3MNDLVIB.js";import{d as _}from"./chunk-ZXNH2FSH.js";var Y=()=>[15,25,50];function Z(o,n){o&1&&(r(0,"tr")(1,"th",16),m(2,"#"),t(),r(3,"th",17),m(4,"Sabor"),t(),r(5,"th",18),m(6,"Acciones"),t()())}function ee(o,n){if(o&1){let g=x();r(0,"tr")(1,"td",17),m(2),t(),r(3,"td"),m(4),t(),r(5,"td")(6,"div",19)(7,"p-button",20),c("click",function(){let l=y(g).$implicit,e=C();return E(e.editItem(l))}),t(),h(8,"p-button",21),t()()()}if(o&2){let g=n.$implicit,i=n.rowIndex;a(2),v(i+1),a(2),v(g.name),a(3),s("rounded",!0),a(),s("rounded",!0)}}function te(o,n){o&1&&(r(0,"small",22),m(1,"El campo es obligatorio. "),t())}var ye=(()=>{let n=class n{constructor(){this.fb=u($),this.dataService=u(P),this.msg=u(X),this.data=[],this.form=new D({}),this._unsubscribeAll=new S}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.initForm(),this.getAll()}initForm(){this.form=this.fb.group({id:[null],name:[null,V.required]})}get name(){return this.form.get("name")}getAll(){this.dataService.findAll(f.flavors).pipe(p(this._unsubscribeAll)).subscribe({next:i=>{this.data=i}})}get isEdit(){return!!this.form?.get("id")?.value}get formLabel(){return`${this.isEdit?"Modificar":"Nuevo"} Sabor`}get buttonLabel(){return`${this.isEdit?"Actualizar":"Guardar"}`}clear(){this.initForm()}editItem(i){this.form.get("id")?.setValue(i.id),this.form.get("name")?.setValue(i.name)}save(){if(this.form.invalid){this.msg.info("Es necesario llenar el formulario.");return}if(this.isEdit){let l=this.form.value;this.dataService.update(f.flavors,l).pipe(p(this._unsubscribeAll)).subscribe({next:e=>{this.msg.success("Actualizado con \xE9xito."),this.getAll(),this.clear()},error:e=>{this.msg.error(e.error.messagge||"Ups! No se pudo actualizar.")}})}else{let i=this.form.value,{id:l}=i,e=_(i,["id"]);this.dataService.create(f.flavors,e).pipe(p(this._unsubscribeAll)).subscribe({next:d=>{this.msg.success("Registrado con \xE9xito."),this.getAll(),this.clear()},error:d=>{this.msg.error(d.error.messagge||"Ups! No se pudo registrar.")}})}}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=F({type:n,selectors:[["app-flavors"]],standalone:!0,features:[T],decls:20,vars:12,consts:[[1,"grid","row-gap-2"],[1,"col-12","lg:col-6"],["legend","Listados"],["styleClass","p-datatable-sm p-datatable-gridlines",3,"value","paginator","rows","showCurrentPageReport","currentPageReportTemplate","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[3,"legend"],["pFocusTrap","",3,"formGroup"],[1,"col-12"],[1,"flex","flex-column","gap-2"],["htmlFor","name"],["id","name","type","text","pInputText","","formControlName","name"],["id","name-help","class","p-error",4,"ngIf"],[1,"flex","justify-content-end","gap-2"],["label","Limpiar","size","small","severity","danger",3,"click"],["size","small","severity","success",3,"click","label","disabled"],[1,"text-center",2,"width","4rem"],[1,"text-center"],[1,"text-center",2,"width","8rem"],[1,"flex","gap-2","justify-content-center"],["size","small","icon","bi bi-pen-fill","severity","success",3,"click","rounded"],["size","small","icon","bi bi-trash-fill","severity","danger",3,"rounded"],["id","name-help",1,"p-error"]],template:function(l,e){l&1&&(r(0,"div",0)(1,"div",1)(2,"p-fieldset",2)(3,"p-table",3),b(4,Z,7,0,"ng-template",4)(5,ee,9,4,"ng-template",5),t()()(),r(6,"div",1)(7,"p-fieldset",6)(8,"form",7)(9,"div",0)(10,"div",8)(11,"div",9)(12,"label",10),m(13,"Sabor"),t(),h(14,"input",11),b(15,te,2,0,"small",12),t()(),r(16,"div",8)(17,"div",13)(18,"p-button",14),c("click",function(){return e.clear()}),t(),r(19,"p-button",15),c("click",function(){return e.save()}),t()()()()()()()()),l&2&&(a(3),s("value",e.data)("paginator",!0)("rows",15)("showCurrentPageReport",!0)("currentPageReportTemplate",e.data.length?"Mostrando del {first} al {last} de {totalRecords} registros":"{totalRecords} registros encontrados")("rowsPerPageOptions",w(11,Y)),a(4),s("legend",e.formLabel),a(),s("formGroup",e.form),a(7),s("ngIf",(e.name==null?null:e.name.invalid)&&((e.name==null?null:e.name.dirty)||(e.name==null?null:e.name.touched))),a(4),s("label",e.buttonLabel)("disabled",e.form.invalid))},dependencies:[I,A,B,L,R,z,G,U,j,O,H,q,M,W,Q,N,k,K,J]});let o=n;return o})();export{ye as default};
